!function(){function e(e){e.stopPropagation(),e.preventDefault()}function t(e){e.stopPropagation(),e.preventDefault(),c.contentWindow.postMessage("enter","http://tfe.dev/")}function r(e){e.stopPropagation(),c.contentWindow.postMessage("start","http://tfe.dev/")}function n(e){c.contentWindow.postMessage("leave","http://tfe.dev/"),e.stopPropagation(),e.preventDefault()}function i(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer.getData("text/html"),r=/src="?([^"\s]+)"?\s*/,n,i;return n=r.exec(t),c.contentWindow.postMessage("drop="+n[1],"http://tfe.dev/"),!1}function o(e){e.stopPropagation(),e.preventDefault(),c.contentWindow.postMessage("end","http://tfe.dev/")}name="",price="",currency="$",description="",image="",window.location.href.indexOf("etsy.com")>-1?(nameElem=document.querySelectorAll("h1")[0],nameElem&&(name=nameElem.textContent.trim()),priceElem=document.querySelectorAll(".price-block")[0],priceElem&&(priceElem=priceElem.querySelectorAll("span.currency-value")[0],price=priceElem.textContent.trim()),currencyElem=document.querySelectorAll(".price-block")[0],currencyElem&&(currencyElem=currencyElem.querySelectorAll("span.currency-symbol")[0],currency=currencyElem.textContent.trim()),descriptionElem=document.querySelectorAll("#description-text")[0],descriptionElem&&(description=descriptionElem.innerHTML.trim(),description.substring(0,300)),imageElem=document.querySelectorAll("#image-main")[0],imageElem&&(imageElem=imageElem.querySelectorAll("img")[0],image=imageElem.getAttribute("src"))):window.location.href.indexOf("amazon.")>-1&&(nameElem=document.querySelectorAll("h1#title")[0]||document.querySelectorAll(".parseasinTitle")[0],nameElem&&(name=nameElem.textContent.trim()),priceElem=document.querySelectorAll("#priceblock_ourprice")[0]||document.querySelectorAll("#buyingPriceContent")[0],priceElem&&(price=priceElem.textContent.trim(),price.indexOf("$")>-1?(price=price.replace("$",""),currency="$"):price.indexOf("EUR")>-1?(price=price.replace("EUR",""),currency="€"):price.indexOf("£")>-1&&(price=price.replace("£",""),currency="£")),descriptionElem=document.querySelectorAll("#productDescription")[0],descriptionElem&&(descriptionElem=descriptionElem.querySelectorAll("p")[0],description=descriptionElem.textContent.trim(),description.substring(0,300),description=description.replace("&","$and$"),description=description.replace("=","$equals$")),imageElem=document.querySelectorAll("#main-image-container")[0],imageElem&&(imageElem=imageElem.querySelectorAll("img")[0],image=imageElem.getAttribute("src"))),serverUrl="http://tfe.dev/";var c=document.getElementById("iframeId"),l=document.getElementById("dropzone");return c?(c.remove(0),void l.remove(0)):(iframeSrc=serverUrl+"extension/index.html?name="+encodeURI(name)+"&url="+window.location+"&price="+encodeURI(price)+"&currency="+encodeURI(currency)+"&description="+encodeURI(description)+"&image="+encodeURI(image),c=document.createElement("iframe"),c.src=iframeSrc,c.setAttribute("style","z-index: 100000;position: fixed;bottom: 10px;margin-bottom: 0px;margin-left: 0px;right: 10px;width: 220px;min-height: 573px;border: none;overflow: hidden;background: rgba(110, 176, 4, 1);box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.2);"),c.frameborder="0",c.id="iframeId",c.allowtransparency=!0,document.body.appendChild(c),l=document.createElement("div"),l.id="dropzone",l.style.display="block",l.style.position="fixed",l.style.right="25px",l.style.width="190px",l.style.bottom="438px",l.style.height="130px",l.style.zIndex="1000000",l.style.background="red",l.style.opacity="0",document.body.appendChild(l),l.addEventListener("dragover",e,!1),l.addEventListener("dragenter",t,!1),l.addEventListener("dragleave",n,!1),l.addEventListener("drop",i,!1),document.addEventListener("dragstart",r,!0),void document.addEventListener("dragend",o,!1))}();