!function(){function e(e){for(i=0;i<d.length;i++){if(d[i].getAttribute("property")==e)return d[i].getAttribute("content");if(d[i].getAttribute("name")==e)return d[i].getAttribute("content")}return!1}function t(e){e.stopPropagation(),e.preventDefault()}function r(e){e.stopPropagation(),e.preventDefault(),a.contentWindow.postMessage("enter","*")}function n(e){a.contentWindow.postMessage("leave","*"),e.stopPropagation(),e.preventDefault()}function c(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer.getData("text/html"),r=/src="?([^"\s]+)"?\s*/,n,i;return n=r.exec(t),a.contentWindow.postMessage("drop="+n[1],"*"),!1}function o(e){e.stopPropagation(),a.contentWindow.postMessage("start","*")}function l(e){e.stopPropagation(),e.preventDefault(),a.contentWindow.postMessage("end","*")}function m(e){e.data.indexOf("height=")>-1?(iframeHeight=e.data.replace("height=",""),document.querySelectorAll("#iframeId")[0].style.height=iframeHeight):"ready"==e.data&&(p.style.display="block",a.contentWindow&&(a.contentWindow.postMessage("name="+fname,serverUrl),a.contentWindow.postMessage("url="+window.location,serverUrl),a.contentWindow.postMessage("price="+price,serverUrl),a.contentWindow.postMessage("currency="+currency,serverUrl),a.contentWindow.postMessage("description="+description,serverUrl),a.contentWindow.postMessage("image="+image,serverUrl)))}debug=0;var a=document.getElementById("iframeId"),p=document.getElementById("dropzone");if(a)return a.remove(0),p.remove(0),window.removeEventListener("message",m),!1;fname="",price="",currency="$",description="",image="";var d=document.getElementsByTagName("meta");e("og:title")?fname=e("og:title"):(nameElem=document.querySelectorAll("h1")[0],nameElem&&(fname=nameElem.textContent.trim())),e("og:image")&&(image=e("og:image")),e("description")&&(description=e("description")),window.location.href.indexOf("etsy.com")>-1?(""!=e("og:title")&&(fname=e("og:title")),""!=e("og:image")&&(image=e("og:image")),priceElem=document.querySelectorAll(".price-block")[0],priceElem&&(priceElem=priceElem.querySelectorAll("span.currency-value")[0],price=priceElem.textContent.trim()),currencyElem=document.querySelectorAll(".price-block")[0],currencyElem&&(currencyElem=currencyElem.querySelectorAll("span.currency-symbol")[0],currency=currencyElem.textContent.trim()),descriptionElem=document.querySelectorAll("#description-text")[0],descriptionElem&&(description=descriptionElem.innerHTML.trim(),description.substring(0,300)),imageElem=document.querySelectorAll("#image-main")[0],imageElem&&(imageElem=imageElem.querySelectorAll("img")[0],image=imageElem.getAttribute("src"))):window.location.href.indexOf("amazon.")>-1?(nameElem=document.querySelectorAll("h1#title")[0]||document.querySelectorAll(".parseasinTitle")[0],nameElem&&(fname=nameElem.textContent.trim()),priceElem=document.querySelectorAll("#priceblock_ourprice")[0]||document.querySelectorAll("#buyingPriceContent")[0],priceElem&&(price=priceElem.textContent.trim(),price.indexOf("$")>-1?(price=price.replace("$",""),currency="$"):price.indexOf("EUR")>-1?(price=price.replace("EUR",""),currency="€"):price.indexOf("£")>-1&&(price=price.replace("£",""),currency="£")),descriptionElem=document.querySelectorAll("#productDescription")[0],descriptionElem&&(descriptionElem=descriptionElem.querySelectorAll("p")[0],description=descriptionElem.textContent.trim(),description.substring(0,300)),imageElem=document.querySelectorAll("#main-image-container")[0],imageElem&&(imageElem=imageElem.querySelectorAll("img")[0],image=imageElem.getAttribute("src"))):window.location.href.indexOf("store.apple")>-1?(priceElem=document.querySelectorAll('span[itemprop="price"]')[0],priceElem&&(price=priceElem.textContent.trim()),currencyElem=document.querySelectorAll('meta[itemprop="priceCurrency"]')[0],currencyElem&&(currencyElem=currencyElem.getAttribute("content"),currencyElem.indexOf("$")>-1||currencyElem.indexOf("USD")>-1?(price=price.replace("$",""),price=price.replace("USD",""),currency="$"):currencyElem.indexOf("€")>-1||currencyElem.indexOf("EUR")>-1?(price=price.replace("€",""),price=price.replace("EUR",""),currency="€"):(currencyElem.indexOf("£")>-1||currencyElem.indexOf("GBP")>-1)&&(price=price.replace("£",""),price=price.replace("GBP",""),currency="£")),imageElem=document.querySelectorAll("#productInfo")[0],imageElem&&(imageElem=imageElem.querySelectorAll("img")[0],image=imageElem.getAttribute("src"),console.log(image))):window.location.href.indexOf("pinterest.com")>-1&&e("og:description")&&(fname=e("og:description")),serverUrl=1==debug?"http://tfe.dev/":"http://giftt.me/",iframeSrc=serverUrl+"extension/index.php",a=document.createElement("iframe"),a.src=iframeSrc,a.setAttribute("style","z-index: 100000;position: fixed;bottom: 10px;margin-bottom: 0px;margin-left: 0px;right: 10px;width: 220px;height: 573px;border: none;overflow: hidden;background: rgba(110, 176, 4, 1);box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.2);-webkit-transition: height 0.4s ease-in-out;transition: height 0.4s ease-in-out;"),a.frameborder="0",a.id="iframeId",a.allowtransparency=!0,document.body.appendChild(a),p=document.createElement("div"),p.id="dropzone",p.style.position="fixed",p.style.right="25px",p.style.width="190px",p.style.bottom="438px",p.style.height="130px",p.style.zIndex="1000000",p.style.background="red",p.style.opacity="0",p.style.display="none",document.body.appendChild(p),p.addEventListener("dragover",t,!1),p.addEventListener("dragenter",r,!1),p.addEventListener("dragleave",n,!1),p.addEventListener("drop",c,!1),document.addEventListener("dragstart",o,!1),document.addEventListener("dragend",l,!1),window.addEventListener("message",m,!1)}();