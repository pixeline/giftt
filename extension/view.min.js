!function(){function e(e){for(i=0;i<m.length;i++){if(m[i].getAttribute("property")==e)return m[i].getAttribute("content");if(m[i].getAttribute("name")==e)return m[i].getAttribute("content")}return!1}function r(e){e.stopPropagation(),e.preventDefault()}function t(e){e.stopPropagation(),e.preventDefault(),iframe.contentWindow.postMessage("enter","*")}function n(e){iframe.contentWindow.postMessage("leave","*"),e.stopPropagation(),e.preventDefault()}function o(e){e.stopPropagation(),e.preventDefault();var r=e.dataTransfer.getData("text/html"),t=/src="?([^"\s]+)"?\s*/,i,n;return i=t.exec(r),iframe.contentWindow.postMessage("drop="+i[1],"*"),!1}function c(e){e.stopPropagation(),iframe.contentWindow.postMessage("start","*")}function l(e){e.stopPropagation(),e.preventDefault(),iframe.contentWindow.postMessage("end","*")}function a(e){e.data.indexOf("height=")>-1?(iframeHeight=e.data.replace("height=",""),document.querySelectorAll("#iframeId")[0].style.height=iframeHeight):"ready"==e.data&&(dropzone.style.display="block",iframe.contentWindow&&(iframe.contentWindow.postMessage("name="+fname,serverUrl),iframe.contentWindow.postMessage("url="+window.location,serverUrl),iframe.contentWindow.postMessage("price="+price,serverUrl),iframe.contentWindow.postMessage("currency="+currency,serverUrl),iframe.contentWindow.postMessage("description="+description,serverUrl),iframe.contentWindow.postMessage("image="+image,serverUrl)))}debug=1,fname="",price="",currency="$",description="",image="";var m=document.getElementsByTagName("meta");e("og:title")?fname=e("og:title"):(nameElem=document.querySelectorAll("h1")[0],nameElem&&(fname=nameElem.textContent.trim())),e("og:image")&&(image=e("og:image")),e("description")&&(description=e("description")),window.location.href.indexOf("etsy.com")>-1?(""!=e("og:title")&&(fname=e("og:title")),""!=e("og:image")&&(image=e("og:image")),priceElem=document.querySelectorAll(".price-block")[0],priceElem&&(priceElem=priceElem.querySelectorAll("span.currency-value")[0],price=priceElem.textContent.trim()),currencyElem=document.querySelectorAll(".price-block")[0],currencyElem&&(currencyElem=currencyElem.querySelectorAll("span.currency-symbol")[0],currency=currencyElem.textContent.trim()),descriptionElem=document.querySelectorAll("#description-text")[0],descriptionElem&&(description=descriptionElem.innerHTML.trim(),description.substring(0,300)),imageElem=document.querySelectorAll("#image-main")[0],imageElem&&(imageElem=imageElem.querySelectorAll("img")[0],image=imageElem.getAttribute("src"))):window.location.href.indexOf("amazon.")>-1?(nameElem=document.querySelectorAll("h1#title")[0]||document.querySelectorAll(".parseasinTitle")[0],nameElem&&(fname=nameElem.textContent.trim()),priceElem=document.querySelectorAll("#priceblock_ourprice")[0]||document.querySelectorAll("#buyingPriceContent")[0],priceElem&&(price=priceElem.textContent.trim(),price.indexOf("$")>-1?(price=price.replace("$",""),currency="$"):price.indexOf("EUR")>-1?(price=price.replace("EUR",""),currency="€"):price.indexOf("£")>-1&&(price=price.replace("£",""),currency="£")),descriptionElem=document.querySelectorAll("#productDescription")[0],descriptionElem&&(descriptionElem=descriptionElem.querySelectorAll("p")[0],description=descriptionElem.textContent.trim(),description.substring(0,300)),imageElem=document.querySelectorAll("#main-image-container")[0],imageElem&&(imageElem=imageElem.querySelectorAll("img")[0],image=imageElem.getAttribute("src"))):window.location.href.indexOf("store.apple")>-1?(priceElem=document.querySelectorAll('span[itemprop="price"]')[0],priceElem&&(price=priceElem.textContent.trim()),currencyElem=document.querySelectorAll('meta[itemprop="priceCurrency"]')[0],currencyElem&&(currencyElem=currencyElem.getAttribute("content"),currencyElem.indexOf("$")>-1||currencyElem.indexOf("USD")>-1?(price=price.replace("$",""),price=price.replace("USD",""),currency="$"):currencyElem.indexOf("€")>-1||currencyElem.indexOf("EUR")>-1?(price=price.replace("€",""),price=price.replace("EUR",""),currency="€"):(currencyElem.indexOf("£")>-1||currencyElem.indexOf("GBP")>-1)&&(price=price.replace("£",""),price=price.replace("GBP",""),currency="£")),imageElem=document.querySelectorAll("#productInfo")[0],imageElem&&(imageElem=imageElem.querySelectorAll("img")[0],image=imageElem.getAttribute("src"),console.log(image))):window.location.href.indexOf("pinterest.com")>-1&&e("og:description")&&(fname=e("og:description")),serverUrl=0==debug?"http://tfe.dev/":"http://giftt.me/",iframeSrc=serverUrl+"extension/index.php",iframe=document.createElement("iframe"),iframe.src=iframeSrc,iframe.setAttribute("style","z-index: 100000;position: fixed;bottom: 10px;margin-bottom: 0px;margin-left: 0px;right: 10px;width: 220px;height: 573px;border: none;overflow: hidden;background: rgba(110, 176, 4, 1);box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.2);-webkit-transition: height 0.4s ease-in-out;transition: height 0.4s ease-in-out;"),iframe.frameborder="0",iframe.id="iframeId",iframe.allowtransparency=!0,document.body.appendChild(iframe),dropzone=document.createElement("div"),dropzone.id="dropzone",dropzone.style.position="fixed",dropzone.style.right="25px",dropzone.style.width="190px",dropzone.style.bottom="438px",dropzone.style.height="130px",dropzone.style.zIndex="1000000",dropzone.style.background="red",dropzone.style.opacity="0",dropzone.style.display="none",document.body.appendChild(dropzone),dropzone.addEventListener("dragover",r,!1),dropzone.addEventListener("dragenter",t,!1),dropzone.addEventListener("dragleave",n,!1),dropzone.addEventListener("drop",o,!1),document.addEventListener("dragstart",c,!1),document.addEventListener("dragend",l,!1),window.addEventListener("message",a,!1)}();