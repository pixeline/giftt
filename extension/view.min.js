!function(){function e(e){for(i=0;i<a.length;i++){if(a[i].getAttribute("property")==e)return a[i].getAttribute("content");if(a[i].getAttribute("name")==e)return a[i].getAttribute("content")}return!1}function t(e){e.stopPropagation(),e.preventDefault()}function r(e){e.stopPropagation(),e.preventDefault(),iframe.contentWindow.postMessage("enter","*")}function o(e){iframe.contentWindow.postMessage("leave","*"),e.stopPropagation(),e.preventDefault()}function n(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer.getData("text/html"),r=/src="?([^"\s]+)"?\s*/,i,o;return i=r.exec(t),iframe.contentWindow.postMessage("drop="+i[1],"*"),!1}function c(e){e.stopPropagation(),iframe.contentWindow.postMessage("start","*")}function l(e){e.stopPropagation(),e.preventDefault(),iframe.contentWindow.postMessage("end","*")}function p(e){e.data.indexOf("height=")>-1?(iframeHeight=e.data.replace("height=",""),document.querySelectorAll("#giftt_iframe")[0].style.setProperty("height",iframeHeight+"px","important"),document.querySelectorAll("#giftt_close")[0].style.setProperty("bottom",parseInt(iframeHeight)+10+"px","important")):"ready"==e.data?(dropzone.style.setProperty("display","block","important"),iframe.contentWindow&&(iframe.contentWindow.postMessage("name="+fname,serverUrl),iframe.contentWindow.postMessage("url="+window.location,serverUrl),iframe.contentWindow.postMessage("price="+price,serverUrl),iframe.contentWindow.postMessage("currency="+currency,serverUrl),iframe.contentWindow.postMessage("description="+description,serverUrl),iframe.contentWindow.postMessage("image="+image,serverUrl))):"finished"==e.data&&dropzone.style.setProperty("display","none","important")}debug=0,fname="",price="",currency="$",description="",image="";var a=document.getElementsByTagName("meta");e("og:title")?fname=e("og:title"):(nameElem=document.querySelectorAll("h1")[0],nameElem&&(fname=nameElem.textContent.trim())),e("og:image")&&(image=e("og:image")),e("description")&&(description=e("description")),window.location.href.indexOf("etsy.com")>-1?(""!=e("og:title")&&(fname=e("og:title")),""!=e("og:image")&&(image=e("og:image")),priceElem=document.querySelectorAll(".price-block")[0],priceElem&&(priceElem=priceElem.querySelectorAll("span.currency-value")[0],price=priceElem.textContent.trim()),currencyElem=document.querySelectorAll(".price-block")[0],currencyElem&&(currencyElem=currencyElem.querySelectorAll("span.currency-symbol")[0],currency=currencyElem.textContent.trim()),descriptionElem=document.querySelectorAll("#description-text")[0],descriptionElem&&(description=descriptionElem.innerHTML.trim(),description.substring(0,300)),imageElem=document.querySelectorAll("#image-main")[0],imageElem&&(imageElem=imageElem.querySelectorAll("img")[0],image=imageElem.getAttribute("src"))):window.location.href.indexOf("amazon.")>-1?(nameElem=document.querySelectorAll("h1#title")[0]||document.querySelectorAll(".parseasinTitle")[0],nameElem&&(fname=nameElem.textContent.trim()),priceElem=document.querySelectorAll("#priceblock_ourprice")[0]||document.querySelectorAll("#buyingPriceContent")[0],priceElem&&(price=priceElem.textContent.trim(),price.indexOf("$")>-1?(price=price.replace("$",""),currency="$"):price.indexOf("EUR")>-1?(price=price.replace("EUR",""),currency="€"):price.indexOf("£")>-1&&(price=price.replace("£",""),currency="£")),descriptionElem=document.querySelectorAll("#productDescription")[0],descriptionElem&&(descriptionElem=descriptionElem.querySelectorAll("p")[0],description=descriptionElem.textContent.trim(),description.substring(0,300)),imageElem=document.querySelectorAll("#main-image-container")[0],imageElem&&(imageElem=imageElem.querySelectorAll("img")[0],image=imageElem.getAttribute("src"))):window.location.href.indexOf("store.apple")>-1?(priceElem=document.querySelectorAll('span[itemprop="price"]')[0],priceElem&&(price=priceElem.textContent.trim()),currencyElem=document.querySelectorAll('meta[itemprop="priceCurrency"]')[0],currencyElem&&(currencyElem=currencyElem.getAttribute("content"),currencyElem.indexOf("$")>-1||currencyElem.indexOf("USD")>-1?(price=price.replace("$",""),price=price.replace("USD",""),currency="$"):currencyElem.indexOf("€")>-1||currencyElem.indexOf("EUR")>-1?(price=price.replace("€",""),price=price.replace("EUR",""),currency="€"):(currencyElem.indexOf("£")>-1||currencyElem.indexOf("GBP")>-1)&&(price=price.replace("£",""),price=price.replace("GBP",""),currency="£")),imageElem=document.querySelectorAll("#productInfo")[0],imageElem&&(imageElem=imageElem.querySelectorAll("img")[0],image=imageElem.getAttribute("src"),console.log(image))):window.location.href.indexOf("pinterest.com")>-1&&e("og:description")&&(fname=e("og:description")),serverUrl=1==debug?"http://tfe.dev/":"http://giftt.me/",iframeSrc=serverUrl+"extension/view.php",iframe=document.createElement("iframe"),iframe.src=iframeSrc,iframe.setAttribute("style","z-index: 100000;position: fixed;bottom: 10px;margin-bottom: 0px;margin-left: 0px;right: 10px;width: 220px;height: 573px;border: none;border-top-left-radius: 2px;border-bottom-left-radius: 2px;border-bottom-right-radius: 2px;overflow: hidden;background: rgba(110, 176, 4, 1);box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.2);-webkit-transition: height 0.4s ease-in-out;transition: height 0.4s ease-in-out;"),iframe.frameborder="0",iframe.id="giftt_iframe",iframe.allowtransparency=!0,document.body.appendChild(iframe),dropzone=document.createElement("div"),dropzone.id="giftt_dropzone",dropzone.style.setProperty("position","fixed","important"),dropzone.style.setProperty("right","25px","important"),dropzone.style.setProperty("width","190px","important"),dropzone.style.setProperty("bottom","438px","important"),dropzone.style.setProperty("height","130px","important"),dropzone.style.setProperty("z-index","1000000","important"),dropzone.style.setProperty("background","none ","important"),dropzone.style.setProperty("opacity","0","important"),dropzone.style.setProperty("display","none","important"),document.body.appendChild(dropzone),closeDiv=document.createElement("div"),closeDiv.id="giftt_close",closeDiv.style.setProperty("position","fixed","important"),closeDiv.style.setProperty("right","10px","important"),closeDiv.style.setProperty("width","24px","important"),closeDiv.style.setProperty("bottom","583px","important"),closeDiv.style.setProperty("height","24px","important"),closeDiv.style.setProperty("line-height","24px","important"),closeDiv.style.setProperty("border-top-left-radius","2px","important"),closeDiv.style.setProperty("border-top-right-radius","2px","important"),closeDiv.style.setProperty("text-align","center","important"),closeDiv.style.setProperty("cursor","pointer","important"),closeDiv.style.setProperty("z-index","1000000","important"),closeDiv.style.setProperty("background","rgba(201, 225, 154, 1)","important"),closeDiv.style.transition="background 0.2s ease-in-out, bottom 0.4s ease-in-out",closeDiv.style.webkitTransition="background 0.2s ease-in-out, bottom 0.4s ease-in-out",closeDiv.innerHTML='<img src="'+serverUrl+'extension/images/close.svg" style="margin-top: 8px;" />',document.body.appendChild(closeDiv),closeDiv.addEventListener("mouseover",function(){closeDiv.style.setProperty("background","rgba(110, 176, 4, 1)","important")},!1),closeDiv.addEventListener("mouseout",function(){closeDiv.style.setProperty("background","rgba(201, 225, 154, 1)","important")},!1),closeDiv.addEventListener("click",function(){iframe.style.setProperty("display","none","important"),dropzone.style.setProperty("display","none","important"),closeDiv.style.setProperty("display","none","important")},!1),dropzone.addEventListener("dragover",t,!1),dropzone.addEventListener("dragenter",r,!1),dropzone.addEventListener("dragleave",o,!1),dropzone.addEventListener("drop",n,!1),document.addEventListener("dragstart",c,!1),document.addEventListener("dragend",l,!1),window.addEventListener("message",p,!1)}();