!function(){function t(){i(),e()}function i(){body.removeClass("nojs")}function e(){(body.hasClass("wishlist")&&body.hasClass("view")||body.hasClass("user")&&body.hasClass("view"))&&setTimeout(function(){masContainer=$(".wishes"),masContainer.masonry({columnWidth:".wishes li:nth-child(2)",itemSelector:".wishes li"})},50)}function n(t){return t.hasClass("active")?!1:(id=t.attr("id"),t.siblings("li").removeClass("active"),t.addClass("active"),wishlists=$(".wishlists"),wishlistsAll=wishlists.find(".public, .private"),wishlistsAll.fadeOut(200),void setTimeout(function(){wishlists.find("li."+id).fadeIn(200)},200))}function o(){aside=$("aside"),main=$(".main"),aside.toggleClass("show"),main.toggleClass("withAside")}function a(t){tag=t.prop("tagName").toLowerCase(),type=t.prop("type").toLowerCase(),"input"==tag?(s(t,tag),"file"==type&&(r(t),l(t))):"select"==tag?s(t,tag):"textarea"==tag&&s(t,tag)}function s(t){t.attr("required")&&("input"==tag?"file"==type?t.val().length||"/"!=t.siblings("img").attr("src")||(name=t.attr("id"),errors[name]=tag):t.val().length||(name=t.attr("id"),errors[name]=tag):"select"==tag?(bar=t.find("option:selected").attr("value"),bar||(name=t.attr("id"),errors[name]=tag)):"textarea"==tag&&(t.val().length||(name=t.attr("id"),errors[name]=tag)))}function r(t){ext=t.val().substring(t.val().lastIndexOf(".")+1),t.val().length&&"jpg"!=ext&&"jpeg"!=ext&&"png"!=ext&&"gif"!=ext&&(name="image",errors[name]=tag)}function l(t){file=t[0].files[0],file&&(file.size>1e6||t.fileSize>1e6)&&(name="image",errors[name]=tag)}function c(t){$(".modal."+t).fadeIn(200).addClass("show"),h=!0,init_img=$(".modal."+g).find("img").attr("src")}function d(){$(".modal."+g).find("button.close").click()}function f(t){if(t.files&&t.files[0]){var i=new FileReader;i.onload=function(t){$("form .file_cont img").attr("src",t.target.result).css({display:"block"}),$("form .file_cont span").hide()},i.readAsDataURL(t.files[0])}}function u(t,i){i.find(".title").text("Following"),followData={who2:t}}function m(){$.ajax({url:"/_include/logout.php",type:"POST",data:"logout=yes",success:function(){window.location="/"},error:function(){return!1}})}body=$("body"),t(),$(".menu li").on("click",function(){n($(this))}),$("#showAside").on("click",function(){return o(),!1}),form=$("form"),form.submit(function(){return thisForm=$(this),fields=$(this).find("input, textarea, select, radio"),errors={},thisForm.find("label, input, select, textarea").removeClass("error"),fields.each(function(){a($(this))}),$.each(errors,function(t,i){thisForm.find("label[for="+t+"]").addClass("error"),thisForm.find(i+"[id="+t+"]").addClass("error")}),$.isEmptyObject(errors)?void 0:!1});var g,h=!1;$(".modal_trigger").on("click",function(){return g=$(this).data("target"),c(g),!1}),$("button.close").on("click",function(){$(".modal."+g).fadeOut(200,function(){$(this).removeClass("show"),$(this).find("label, input, select, textarea, radio").removeClass("error"),imgCont=$(this).find(".file_cont"),g.indexOf("add")>=0?(imgCont.find("img").attr("src","/").hide(),imgCont.find("span.icon").show()):g.indexOf("edit")>=0&&imgCont.find("img").attr("src",init_img)}),h=!1}),$(".modal .container").on("click",function(t){t.stopPropagation()}),$(".modal").on("click",function(){d()}),$(document).keydown(function(t){27==t.keyCode&&h&&(d(),t.preventDefault())}),$("#image").change(function(){f(this)}),$(".follow a").on("click",function(){return button=$(this),who2=button.data("who2"),u(who2,button),!1}),$("#logout").on("click",function(){return m(),!1})}();