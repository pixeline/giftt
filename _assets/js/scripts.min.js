!function(){function e(){wh=$(window).innerHeight(),fix=3,0==i&&(fix=0),$(".main").height(wh-fix),$(".alter").find(".wrapper").height(wh-84),i++}function t(){e(),n(),s(),l()}function n(){body.removeClass("nojs")}function s(){body.hasClass("wishlist")&&setTimeout(function(){d=$(".wishes"),a()},50)}function a(){d.find("li").length>0&&d.imagesLoaded(function(){d.masonry({itemSelector:".wishes li"})})}function r(){body.toggleClass("withAside"),$(".alter .search").find("input").focus()}function o(e){if(e.files&&e.files[0]){var i=new FileReader;i.onload=function(e){$("form .file_cont img").attr("src",e.target.result).show(),$("form .file_cont span").hide()},i.readAsDataURL(e.files[0])}}function l(){$(".alter").show(),$.ajax({url:"/_include/feed_populate.php",type:"POST",success:function(e){$(".alter .feed").empty().append(e)}})}function h(e){searchData={search:e},$.ajax({url:"/_include/search.php",type:"POST",data:{data:searchData},error:function(){return!1},success:function(e){console.log(e),$(".alter .results").empty().append(e)}})}body=$("body");var d;$(window).on("resize",function(){e()}),i=0,t(),$("#show_hide").on("click",function(){return $(".main").one("click",function(){body.hasClass("withAside")&&r()}),r(),!1}),$(".pod.collapse header").on("click",function(){$(this).siblings(".wrapper").slideToggle(200)}),feedHidden=0,$(".search").on("submit",function(e){e.preventDefault()}).find("input").on("keyup",function(e){input=$(this),alter=$(".alter"),feed=alter.find(".feed"),results=alter.find(".results"),0==feedHidden&&(feed.hide(),results.show(),feedHidden=1),""==input.val()&&(feed.show(),results.hide(),feedHidden=0),13==e.which&&(window.location.href=results.find("a").first().attr("href")),h($(this).val())}),$(document).keydown(function(e){if(37==e.keyCode){if(body.hasClass("wish view"))return target=$(".wish_navigation").find(".prev").find("a").attr("href"),"undefined"!=target&&null!=target&&(location.href=target),!1}else if(39==e.keyCode&&body.hasClass("wish view"))return target=$(".wish_navigation").find(".next").find("a").attr("href"),"undefined"!=target&&null!=target&&(location.href=target),!1}),$("#image").change(function(){o(this)}),$(".wishlist label").on("click",function(){$(this).toggleClass("active"),$(this).parents(".private_checkbox").siblings("input[type=text]").focus()}),$(".wishlist a.icon-plus").on("click",function(){return target=$(this).data("target"),elem=$(".wishlists li.add"),elem.toggle(),elem.find("#name").focus().removeClass("error").attr("placeholder","Name"),elem.find("form").submit(function(e){thisForm=$(this),inputName=thisForm.find("#name"),errors={},inputName.val()||(errors.name="Please give it a name"),thisForm.find("#name").removeClass("error").attr("placeholder","Name"),$.each(errors,function(i,t){thisForm.find("input[name="+i+"]").addClass("error").attr("placeholder",t),e.preventDefault()})}),elem.on("click",function(e){e.stopPropagation()}),$("html").one("click",function(){elem.hide(),$(".wishlist").show()}),!1}),$(".wishlist a.icon-edit").on("click",function(){return parent=$(this).parent("li"),parent.hide(),parent.next().show(),parent.next().find("form").find("#name").focus(),parent.next().find("form").submit(function(e){thisForm=$(this),inputName=thisForm.find("#name"),errors={},inputName.val()||(errors.name="Please give it a name"),thisForm.find("input").removeClass("error"),thisForm.find("#name").attr("placeholder","Name"),$.each(errors,function(i,t){thisForm.find("input[name="+i+"]").addClass("error").attr("placeholder",t),e.preventDefault()})}),parent.next().on("click",function(e){e.stopPropagation()}),$("html").one("click",function(){$(".wishlists .edit").hide(),$(".wishlist").show()}),!1}),$("li.edit .remove").on("click",function(){$(this).submit()}),$(".wish.add, .wish.edit").find("select[name=wishlist]").on("change",function(){"setnew"==$(this).val()&&(new_wishlist_name=prompt("Please give this wishlist a name"),""!=new_wishlist_name&&"null"!=new_wishlist_name?($("input[id=new_wishlist]").remove(),$(this).after('<input id="new_wishlist" type="text" name="new_wishlist" value="'+new_wishlist_name+'" required />').siblings("#new_wishlist").hide(),$(this).children().last().before('<option value="new">'+new_wishlist_name+"</option>").prev().prop("selected",!0)):$(this).children().first().prop("selected",!0))})}();