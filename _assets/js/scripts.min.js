!function(){function e(){wh=$(window).innerHeight(),fix=3,0==i&&(fix=0),$(".main").height(wh-fix),$(".alter").find(".wrapper").height(wh-84-60),i++}function t(){e(),n(),s(),d()}function n(){body.removeClass("nojs")}function s(){body.hasClass("wishlist")&&setTimeout(function(){u=$(".wishes"),o()},50)}function o(){u.find("li").length>0&&u.imagesLoaded(function(){u.masonry({itemSelector:".wishes li"})})}function a(){body.toggleClass("withAside"),c(),body.hasClass("wishlist")&&o()}function r(e){if(e.files&&e.files[0]){var i=new FileReader;i.onload=function(e){$("form .file_cont img").attr("src",e.target.result).show(),$("form .file_cont span").hide()},i.readAsDataURL(e.files[0])}}function l(e,i){followData={who2:e},$.ajax({url:"/_include/follow.php",type:"POST",data:{data:followData},dataType:"text",error:function(){return!1},success:function(){location.reload()}})}function c(){$.ajax({url:"/_include/feed_show.php",type:"POST"})}function d(){$(".alter").show(),$.ajax({url:"/_include/feed_populate.php",type:"POST",success:function(e){$(".alter .feed").append(e)}})}function h(){data=$("#edit_wish").serializeArray(),$.ajax({url:"/edit/wish/edit_do.php",type:"POST",data:data,success:function(e){results=$.parseJSON(e),f(results)}})}function f(e){console.log(e)}body=$("body");var u;$(window).on("resize",function(){e()}),i=0,t(),$("#show_hide").on("click",function(){return $(".main").one("click",function(){body.hasClass("withAside")&&a()}),a(),!1}),$(".pod.collapse header").on("click",function(){$(this).siblings(".wrapper").slideToggle(200)}),feedHidden=0,$(".search input").on("keyup",function(e){input=$(this),alter=$(".alter"),feed=alter.find(".feed"),results=alter.find(".results"),0==feedHidden&&(feed.hide(),results.show(),feedHidden=1),""==input.val()&&(feed.show(),results.hide(),feedHidden=0)}),$("#image").change(function(){r(this)}),$(".wishlist label").on("click",function(){$(this).toggleClass("active"),$(this).parents(".private_checkbox").siblings("input[type=text]").focus()}),$(".wishlist a.icon-plus").on("click",function(){return target=$(this).data("target"),elem=$(".wishlists li.add"),elem.toggle(),elem.find("#name").focus().removeClass("error").attr("placeholder","Name"),elem.find("form").submit(function(e){thisForm=$(this),inputName=thisForm.find("#name"),errors={},inputName.val()||(errors.name="Please give it a name"),thisForm.find("#name").removeClass("error").attr("placeholder","Name"),$.each(errors,function(i,t){thisForm.find("input[name="+i+"]").addClass("error").attr("placeholder",t),e.preventDefault()})}),elem.on("click",function(e){e.stopPropagation()}),$("html").one("click",function(){elem.hide(),$(".wishlist").show()}),!1}),$(".wishlist a.icon-edit").on("click",function(){return parent=$(this).parent("li"),parent.hide(),parent.next().show(),parent.next().find("form").find("#name").focus(),parent.next().find("form").submit(function(e){thisForm=$(this),inputName=thisForm.find("#name"),errors={},inputName.val()||(errors.name="Please give it a name"),thisForm.find("input").removeClass("error"),thisForm.find("#name").attr("placeholder","Name"),$.each(errors,function(i,t){thisForm.find("input[name="+i+"]").addClass("error").attr("placeholder",t),e.preventDefault()})}),parent.next().on("click",function(e){e.stopPropagation()}),$("html").one("click",function(){$(".wishlists .edit").hide(),$(".wishlist").show()}),!1}),$("li.edit .remove").on("click",function(){$(this).submit()}),$(".wish.add, .wish.edit").find("select[name=wishlist]").on("change",function(){"new"==$(this).val()?$(this).css({opacity:.2}).after('<input id="new_wishlist" type="text" name="new_wishlist" placeholder="Name your new wishlist" required />').siblings("#new_wishlist").focus():$(this).css({opacity:1}).siblings("#new_wishlist").remove()}),$(".follow").on("click",function(){return button=$(this),who=button.data("who"),l(who,button),!1}),$(".wish.view form").submit(function(){return thisForm=$(this),fields=$(this).find("input, textarea, select, radio"),errors={},thisForm.find("label, input, select, textarea").removeClass("error"),fields.each(function(){validate($(this))}),$.each(errors,function(e,i){thisForm.find("label[for="+e+"]").addClass("error"),thisForm.find(i+"[id="+e+"]").addClass("error")}),$.isEmptyObject(errors)?void 0:!1})}();