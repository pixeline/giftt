!function(){function i(){wh=$(window).innerHeight(),$(".main").height(wh),$(".feed").find(".wrapper").height(wh-80)}function t(){i(),n(),e(),f()}function n(){body.removeClass("nojs")}function e(){(body.hasClass("user")||body.hasClass("wishlist"))&&body.hasClass("view")&&setTimeout(function(){m=$(".wishes"),m.find(".wish").length>0&&m.imagesLoaded(function(){m.masonry({itemSelector:".wishes li"})})},50)}function o(){$(".settings-list").toggleClass("show")}function s(){body.toggleClass("withAside"),d(),(body.hasClass("user")||body.hasClass("wishlist"))&&body.hasClass("view")&&setTimeout(function(){m.masonry()},250)}function a(i){$(".modal."+i).fadeIn(200).addClass("show"),w=!0,init_img=$(".modal."+p).find("img").attr("src")}function r(){$(".modal."+p).find("button.close").click()}function l(i){if(i.files&&i.files[0]){var t=new FileReader;t.onload=function(i){$("form .file_cont img").attr("src",i.target.result).show(),$("form .file_cont span").hide()},t.readAsDataURL(i.files[0])}}function c(i,t){followData={who2:i},$.ajax({url:"/_include/follow.php",type:"POST",data:{data:followData},dataType:"text",error:function(){return!1},success:function(){location.reload()}})}function d(){$.ajax({url:"/_include/feed_show.php",type:"POST"})}function f(){$.ajax({url:"/_include/feed_populate.php",type:"POST",success:function(i){$(".feed .wrapper").append(i)}})}function u(){data=$("#edit_wish").serializeArray(),$.ajax({url:"/edit/wish/edit_do.php",type:"POST",data:data,success:function(i){results=$.parseJSON(i),h(results)}})}function h(i){console.log(i)}body=$("body");var m;$(window).on("resize",function(){i()}),t(),$("#settings").on("click",function(){return o(),!1}),$(".main").on("click",function(){$(".settings-list").hasClass("show")&&o()}),$("#show_hide").on("click",function(){return s(),!1}),$(".pod.collapse header").on("click",function(){$(this).siblings(".wrapper").slideToggle(200)});var p,w=!1;$(".modal_trigger").on("click",function(){return p=$(this).data("target"),a(p),!1}),$("button.close").on("click",function(){$(".modal."+p).fadeOut(200,function(){$(this).removeClass("show"),$(this).find("label, input, select, textarea, radio").removeClass("error"),imgCont=$(this).find(".file_cont"),p.indexOf("add")>=0?(imgCont.find("img").attr("src","/").hide(),imgCont.find("span.icon").show()):p.indexOf("edit")>=0&&imgCont.find("img").attr("src",init_img)}),w=!1}),$(".modal .container").on("click",function(i){i.stopPropagation()}),$(".modal").on("click",function(){r()}),$(document).keydown(function(i){27==i.keyCode&&w&&(r(),i.preventDefault())}),$(".wish.view").find(".button .hide_edit").on("click",function(){return body.addClass("edit"),$(".hide_edit").hide(),$(".show_edit").show(),edit=1,!1}),$("#link").on("click",function(){return 1==edit?($("input#image").click(),!1):void 0}),$("#image").change(function(){l(this)}),$(".radio label").on("click",function(){$(this).siblings("label").removeClass("active"),$(this).addClass("active")}),$(".icon-close").on("click",function(){$(this).parents(".slide_container").slideUp(200),$(".form-trigger").slideDown(200)}),$(".form-trigger a").on("click",function(){return cont=$(this).parent(".form-trigger"),p=cont.data("target"),$(".slide_container."+p).slideDown(200,function(){$(this).find("input").first().focus()}),cont.slideUp(200),!1}),$(".slide_container").find("input[type=text], textarea").on("focus",function(){$(this).addClass("active")}).on("blur",function(){$(this).removeClass("active")}),$("a.icon-plus").on("click",function(){p=$(this).data("target"),"add_wishlist"==p&&($(".wishlists li.add").toggle(),$(".wishlists form input").first().focus()),$(".wishlists form").submit(function(i){thisForm=$(this),inputName=thisForm.find("#name"),errors={},inputName.val()||(errors.name="Please give it a name"),thisForm.find("input").removeClass("error"),thisForm.find("#name").attr("placeholder","Name"),$.each(errors,function(t,n){thisForm.find("input[name="+t+"]").addClass("error").attr("placeholder",n),i.preventDefault()})})}),$(".follow").on("click",function(){return button=$(this),who=button.data("who"),c(who,button),!1}),$(".wish.view form").submit(function(){return thisForm=$(this),fields=$(this).find("input, textarea, select, radio"),errors={},thisForm.find("label, input, select, textarea").removeClass("error"),fields.each(function(){validate($(this))}),$.each(errors,function(i,t){thisForm.find("label[for="+i+"]").addClass("error"),thisForm.find(t+"[id="+i+"]").addClass("error")}),$.isEmptyObject(errors)?void 0:!1}),$(".beta").find(".close").on("click",function(){$(this).parents(".beta").slideUp()})}();