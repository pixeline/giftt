!function(){function t(){wh=$(window).innerHeight(),$(".main").height(wh),$(".feed").find(".wrapper").height(wh-80)}function i(){t(),n(),e(),f()}function n(){body.removeClass("nojs")}function e(){(body.hasClass("user")||body.hasClass("wishlist"))&&body.hasClass("view")&&setTimeout(function(){m=$(".wishes"),m.find(".wish").length>0&&m.imagesLoaded(function(){m.masonry({itemSelector:".wishes li"})})},50)}function o(){$(".settings-list").toggleClass("show")}function s(){body.toggleClass("withAside"),d(),(body.hasClass("user")||body.hasClass("wishlist"))&&body.hasClass("view")&&setTimeout(function(){m.masonry()},250)}function a(t){$(".modal."+t).fadeIn(200).addClass("show"),p=!0,init_img=$(".modal."+w).find("img").attr("src")}function l(){$(".modal."+w).find("button.close").click()}function r(t){if(t.files&&t.files[0]){var i=new FileReader;i.onload=function(t){$("form .file_cont img").attr("src",t.target.result).css({display:"block"}),$("form .file_cont span").hide()},i.readAsDataURL(t.files[0])}}function c(t,i){followData={who2:t},$.ajax({url:"/_include/follow.php",type:"POST",data:{data:followData},dataType:"text",error:function(){return!1},success:function(){title=i.find(".title"),number=i.find(".number"),i.parents(".follow").toggleClass("following"),"Unfollow"==title.text()?(title.text("Follow"),number.text(parseInt(number.text())-1)):(title.text("Unfollow"),number.text(parseInt(number.text())+1))}})}function d(){$.ajax({url:"/_include/feed_show.php",type:"POST"})}function f(){$.ajax({url:"/_include/feed_populate.php",type:"POST",success:function(t){$(".feed .wrapper").append(t)}})}function u(){data=$("#edit_wish").serializeArray(),$.ajax({url:"/edit/wish/edit_do.php",type:"POST",data:data,success:function(t){results=$.parseJSON(t),h(results)}})}function h(t){console.log(t)}body=$("body");var m;$(window).on("resize",function(){t()}),i(),$("#settings").on("click",function(){return o(),!1}),$(".main").on("click",function(){$(".settings-list").hasClass("show")&&o()}),$("#show_hide").on("click",function(){return s(),!1}),$(".pod.collapse header").on("click",function(){$(this).siblings(".wrapper").slideToggle(200)});var w,p=!1;$(".modal_trigger").on("click",function(){return w=$(this).data("target"),a(w),!1}),$("button.close").on("click",function(){$(".modal."+w).fadeOut(200,function(){$(this).removeClass("show"),$(this).find("label, input, select, textarea, radio").removeClass("error"),imgCont=$(this).find(".file_cont"),w.indexOf("add")>=0?(imgCont.find("img").attr("src","/").hide(),imgCont.find("span.icon").show()):w.indexOf("edit")>=0&&imgCont.find("img").attr("src",init_img)}),p=!1}),$(".modal .container").on("click",function(t){t.stopPropagation()}),$(".modal").on("click",function(){l()}),$(document).keydown(function(t){27==t.keyCode&&p&&(l(),t.preventDefault())}),$(".wish.view").find(".button .hide_edit").on("click",function(){return body.addClass("edit"),$(".hide_edit").hide(),$(".show_edit").show(),edit=1,!1}),$("#link").on("click",function(){return 1==edit?($("input#image").click(),!1):void 0}),$("#image").change(function(){r(this)}),$(".radio label").on("click",function(){$(this).siblings("label").removeClass("active"),$(this).addClass("active")}),$(".icon-close").on("click",function(){$(this).parents(".slide_container").slideUp(200),$(".form-trigger").slideDown(200)}),$(".form-trigger a").on("click",function(){return cont=$(this).parent(".form-trigger"),w=cont.data("target"),$(".slide_container."+w).slideDown(200,function(){$(this).find("input").first().focus()}),cont.slideUp(200),!1}),$(".slide_container").find("input[type=text], textarea").on("focus",function(){$(this).addClass("active")}).on("blur",function(){$(this).removeClass("active")}),$(".button.canfollow a").on("click",function(){return button=$(this),who2=button.data("who2"),c(who2,button),!1}),$(".wish.view form").submit(function(){return thisForm=$(this),fields=$(this).find("input, textarea, select, radio"),errors={},thisForm.find("label, input, select, textarea").removeClass("error"),fields.each(function(){validate($(this))}),$.each(errors,function(t,i){thisForm.find("label[for="+t+"]").addClass("error"),thisForm.find(i+"[id="+t+"]").addClass("error")}),$.isEmptyObject(errors)?void 0:!1}),$(".beta").find(".close").on("click",function(){$(this).parents(".beta").slideUp()})}();