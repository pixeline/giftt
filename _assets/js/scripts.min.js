!function(){function t(){i(),e()}function i(){body.removeClass("nojs")}function e(){(body.hasClass("wishlist")&&body.hasClass("view")||body.hasClass("user")&&body.hasClass("view"))&&setTimeout(function(){masContainer=$(".wishes"),masContainer.find(".wish").not(".add").length>0&&masContainer.imagesLoaded(function(){masContainer.masonry({columnWidth:".wishes li:nth-child(2)",itemSelector:".wishes li"})})},50)}function n(t){return t.hasClass("active")?!1:(id=t.attr("id"),t.siblings("li").removeClass("active"),t.addClass("active"),wishlists=$(".wishlists"),wishlistsAll=wishlists.find(".public, .private"),wishlistsAll.fadeOut(200),void setTimeout(function(){wishlists.find("li."+id).fadeIn(200)},200))}function a(){aside=$("aside"),main=$(".main"),aside.toggleClass("show"),main.toggleClass("withAside")}function o(t){tag=t.prop("tagName").toLowerCase(),type=t.prop("type").toLowerCase(),"input"==tag?(s(t,tag),"file"==type&&(l(t),r(t))):"select"==tag?s(t,tag):"textarea"==tag&&s(t,tag)}function s(t){t.attr("required")&&("input"==tag?"file"==type?t.val().length||"/"!=t.siblings("img").attr("src")||(name=t.attr("id"),errors[name]=tag):t.val().length||(name=t.attr("id"),errors[name]=tag):"select"==tag?(bar=t.find("option:selected").attr("value"),bar||(name=t.attr("id"),errors[name]=tag)):"textarea"==tag&&(t.val().length||(name=t.attr("id"),errors[name]=tag)))}function l(t){ext=t.val().substring(t.val().lastIndexOf(".")+1),t.val().length&&"jpg"!=ext&&"jpeg"!=ext&&"png"!=ext&&"gif"!=ext&&(name="image",errors[name]=tag)}function r(t){file=t[0].files[0],file&&(file.size>1e6||t.fileSize>1e6)&&(name="image",errors[name]=tag)}function d(t){$(".modal."+t).fadeIn(200).addClass("show"),h=!0,init_img=$(".modal."+m).find("img").attr("src")}function c(){$(".modal."+m).find("button.close").click()}function f(t){if(t.files&&t.files[0]){var i=new FileReader;i.onload=function(t){$("form .file_cont img").attr("src",t.target.result).css({display:"block"}),$("form .file_cont span").hide()},i.readAsDataURL(t.files[0])}}function u(t,i){followData={who2:t},$.ajax({url:"/_include/follow.php",type:"POST",data:{data:followData},dataType:"text",error:function(){return!1},success:function(){title=i.find(".title"),number=i.find(".number"),i.parents(".follow").toggleClass("following"),"Following"==title.text()?(title.text("Follow"),number.text(parseInt(number.text())-1)):(title.text("Following"),number.text(parseInt(number.text())+1))}})}body=$("body"),t(),$(".menu li").on("click",function(){n($(this))}),$("#showAside").on("click",function(){return a(),!1}),form=$("form"),form.submit(function(){return thisForm=$(this),fields=$(this).find("input, textarea, select, radio"),errors={},thisForm.find("label, input, select, textarea").removeClass("error"),fields.each(function(){o($(this))}),$.each(errors,function(t,i){thisForm.find("label[for="+t+"]").addClass("error"),thisForm.find(i+"[id="+t+"]").addClass("error")}),$.isEmptyObject(errors)?void 0:!1});var m,h=!1;$(".modal_trigger").on("click",function(){return m=$(this).data("target"),d(m),!1}),$("button.close").on("click",function(){$(".modal."+m).fadeOut(200,function(){$(this).removeClass("show"),$(this).find("label, input, select, textarea, radio").removeClass("error"),imgCont=$(this).find(".file_cont"),m.indexOf("add")>=0?(imgCont.find("img").attr("src","/").hide(),imgCont.find("span.icon").show()):m.indexOf("edit")>=0&&imgCont.find("img").attr("src",init_img)}),h=!1}),$(".modal .container").on("click",function(t){t.stopPropagation()}),$(".modal").on("click",function(){c()}),$(document).keydown(function(t){27==t.keyCode&&h&&(c(),t.preventDefault())}),$(".wish.view").find(".button .hide_edit").on("click",function(){return $(".hide_edit").hide(),$(".show_edit").show(),edit=1,!1}),$("#link").on("click",function(){return 1==edit?($("input#image").click(),!1):void 0}),$("#image").change(function(){f(this)}),$(".button.canfollow a").on("click",function(){return button=$(this),who2=button.data("who2"),u(who2,button),!1}),$(".beta").find(".close").on("click",function(){$(this).parents(".beta").slideUp()})}();